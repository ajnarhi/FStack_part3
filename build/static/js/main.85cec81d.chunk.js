(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),s=t(14),a=t.n(s),c=t(3),i=t(2),r=t(4),u=t.n(r),l="/api/persons",d=function(){return u.a.get(l)},b=function(e){return u.a.post(l,e)},m=function(e,n,t){return u.a.put("".concat(l,"/").concat(e),{name:n,number:t,id:e})},f=function(e){return u.a.delete("".concat(l,"/").concat(e))},h=function(e){return Object(o.jsx)("form",{children:Object(o.jsxs)("div",{children:["Filter: ",Object(o.jsx)("input",{value:e.filteredName,onChange:function(n){console.log(n.target.value),e.setFilteredName(n.target.value)}})]})})},j=function(e){return Object(o.jsxs)("form",{onSubmit:function(n){n.preventDefault(),console.log("button clicked",n.target);var t=e.persons.filter((function(n){return n.name===e.newName}));if(t.length>0)window.confirm(e.newName+" is already added to phonebook. Do you want to replace their old number with the new number?")&&m(t[0].id,e.newName,e.newNumber).then((function(n){e.setNewName(""),e.setNewNumber(""),e.setPersons(e.persons.filter((function(e){return e.id!==n.data.id})).concat(n.data))})).then((function(){e.setNotificationMessage("Person with name '".concat(e.newName,"' has now a new phonenumber")),setTimeout((function(){e.setNotificationMessage(null)}),5e3)})).catch((function(n){console.log("fail"),e.setNotificationMessage("Person with name '".concat(e.newName," ' has already been removed from server"))}));else{var o={name:e.newName,number:e.newNumber};b(o).then((function(n){console.log(n),e.setPersons(e.persons.concat(n.data)),e.setNewName(""),e.setNewNumber("")})).then((function(){e.setNotificationMessage("Person with name '".concat(o.name,"' has been added to phonebook")),setTimeout((function(){e.setNotificationMessage(null)}),5e3)})).catch((function(n){console.log(n.response.data),e.setNotificationMessage(n.response.data)}))}},children:[Object(o.jsxs)("div",{children:["Name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(o.jsxs)("div",{children:["Number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"Add"})})]})},N=function(e){var n=function(n,t){window.confirm("Do you really want delete ".concat(t,"?"))&&f(n).then((function(){e.setPersons(e.persons.filter((function(e){return e.id!==n})))})).then((function(){e.setNotificationMessage("Person with name '".concat(t,"' has been deleted from phonebook")),setTimeout((function(){e.setNotificationMessage(null)}),5e3)}))},t=function(e){return Object(o.jsx)("button",{onClick:function(){return n(e.person.id,e.person.name)},children:"Delete"})};return""===e.filteredName?Object(o.jsx)("div",{children:e.persons.map((function(e){return Object(o.jsxs)("li",{children:[e.name," ",e.number,"  ",Object(o.jsx)(t,{person:e})]},e.name)}))}):Object(o.jsx)("div",{children:e.persons.filter((function(n){return n.name.includes(e.filteredName)})).map((function(e){return Object(o.jsxs)("li",{children:[e.name," ",e.number," ",Object(o.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"Delete"})]},e.name)}))})},p=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"message",children:n})},g=function(){var e=Object(i.useState)([]),n=Object(c.a)(e,2),t=n[0],s=n[1],a=Object(i.useState)(""),r=Object(c.a)(a,2),u=r[0],l=r[1],b=Object(i.useState)(""),m=Object(c.a)(b,2),f=m[0],g=m[1],O=Object(i.useState)(""),w=Object(c.a)(O,2),x=w[0],v=w[1],k=Object(i.useState)(null),M=Object(c.a)(k,2),P=M[0],C=M[1];return Object(i.useEffect)((function(){console.log("effect"),d().then((function(e){s(e.data)}))}),[]),console.log("render",t.length,"persons"),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)("h2",{children:"Filter phonebook"}),Object(o.jsx)(h,{persons:t,filteredName:x,setFilteredName:v}),Object(o.jsx)("h2",{children:"Add new person to phonebook"}),Object(o.jsx)(p,{message:P}),Object(o.jsx)(j,{newName:u,newNumber:f,persons:t,setNewName:l,setNewNumber:g,setPersons:s,handleNameChange:function(e){console.log(e.target.value),l(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),g(e.target.value)},setNotificationMessage:C}),Object(o.jsx)("h3",{children:"Numbers"}),Object(o.jsx)(N,{persons:t,filteredName:x,setPersons:s,setNotificationMessage:C})]})};t(38);a.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.85cec81d.chunk.js.map